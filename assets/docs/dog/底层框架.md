# 地图
地图，也叫关卡，是一个3维空间。

## 参数
xyz取值范围：1~Max(暂定16),用0表示null

地图正方向：x轴长度(Length)向右，y轴宽度(Width)下，z轴高度(Height)向外

### 地图检查
检查地图是否有冲突现象，有冲突的地图不能运行，如实体与实体或方块与方块重叠。  
当降落目标方块不可通行或有实体时，称为堵塞，堵塞会无效传送，实体生成等。

# 回合
回合是实体的行动周期。

## 详细顺序
下面是略去判定的简要流程
1. 按下操作键，回合开始
3. 可行动实体按照id顺序依次行动
5. 可行动的实体给其他实体发送信号
6. 将所有接收到信号的实体存入工作队列
7. 若队列不为空，进行循环：
   1. 取出队列的下一个实体，并判定是否被激活，工作后会则标为已激活
   2. 将接受到信息的未激活实体移入队列
8. 队列空后，所有实体标记为未激活
9. 回合结束，等待下一个操作

# 激活与信号
实体在被激活时会进行工作。  
要被激活，实体要先收到外界信号，根据信号的具体情况决定是否激活。  
实体在工作时可能会发送信号给其他实体。  
信号有力信号和电信号2类。

### 强度
信号有强弱等级，能反应类别等信息，有的信号不能激活实体。

### 力信号-pressure
当一个实体行动结束后，会对其脚下的实体传递力信号，而力信号能激发绝大多数的实体。  
强度在6~8，默认为7.

### 电信号-electricity
某些电路类实体工作时，可能会对周围或特定的实体产生电信号。  
大部分电路类实体有方向，电路类实体不能接受被面对实体发出的电信号，而输出电信号只能传递给面对的方块。
强度在1~2，默认为2.
### 频率激活-frequency
发射电波,让某一频率的的方块收到信号.强度在-9~-1.
暂时未实现。
## 激活信息-json
```javascript
{
   strength:1 //强度.
   source: 25 //此处为信号来源，填信号发送者的id
}
```

# 名词解释
> 改动过内容
### 描述
- 面对：实体面对的格子是其方向(若有磁石为磁石的方向)与其相邻的格子
- 被动：非工作效果，在某些时候由其他实体触发
- 射线：从实体面对的格子开始，向实体方向不断延伸的射线。即不经过方块自身

### 操作键
玩家在按下操作键后，会对所有可操作实体进行一次操作，并推进一个回合，具体如下
- 向上(W)
- 向左(A)
- 向下(S)
- 向右(D)
- 交互(Space)
### 移动类型
> 需要移动到其他位置。实际上仅为了省字，并不是一个词条。
- 位移：表示把实体方向改变为某方向并向此方向移动一格
- 冲刺：实体改变方向并持续向此方向移动，直到满足停下的条件或即将进入不可通行的位置
- 行走：使实体向其方向移动一格
- 停留：实体行动时不作出位置改变
### 特性
>待商讨是否加入

- 无限: 此特性的物品类方块数量为9时，如果不是全部丢弃，则无效化丢弃
- 临期: 部分物品在回合结束时丢弃全部该物体